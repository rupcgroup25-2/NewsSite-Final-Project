CREATE TABLE UsersTableFinal (
    Id INT PRIMARY KEY IDENTITY(1,1),
    Name NVARCHAR(100) NOT NULL,
    Email NVARCHAR(255) NOT NULL UNIQUE, 
    Password NVARCHAR(255) NOT NULL,
    Active BIT NOT NULL DEFAULT 1,
    BlockSharing BIT NOT NULL DEFAULT 0,
    DeletedAt DATE NULL
);

CREATE TABLE TagsTableFinal (
    Id INT PRIMARY KEY IDENTITY,      
    Name NVARCHAR(100) NOT NULL UNIQUE 
);

Create TABLE ArticlesTableFinal (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Title NVARCHAR(255),
    Description NVARCHAR(MAX),
    Url NVARCHAR(500),
    UrlToImage NVARCHAR(500),
    PublishedAt DATETIME,
    SourceName NVARCHAR(100),
    Author NVARCHAR(100)
);

CREATE TABLE ArticleTagsTableFinal (
    ArticleId INT NOT NULL,
    TagId INT NOT NULL,
    PRIMARY KEY (ArticleId, TagId),
    FOREIGN KEY (ArticleId) REFERENCES ArticlesTableFinal(Id),
    FOREIGN KEY (TagId) REFERENCES TagsTableFinal(Id)
);

CREATE TABLE SavedArticlesTable (
    UserId INT,
    ArticleId INT,
    PRIMARY KEY (UserId, ArticleId),
    FOREIGN KEY (UserId) REFERENCES UsersTableFinal(Id),
    FOREIGN KEY (ArticleId) REFERENCES ArticlesTableFinal(Id)
);

CREATE TABLE SharedArticlesTable (
    Id INT PRIMARY KEY IDENTITY(1,1),
    UserId INT,
    ArticleId INT,
    Comment NVARCHAR(MAX), -- התגובה של המשתמש בשיתוף
    SharedAt DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (UserId) REFERENCES UsersTableFinal(Id),
    FOREIGN KEY (ArticleId) REFERENCES ArticlesTableFinal(Id)
);